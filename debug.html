<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTS Voice Bridge ë””ë²„ê·¸ í˜ì´ì§€</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .section {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            background: #f8f9fa;
            border-left: 4px solid #007bff;
        }
        .success { border-left-color: #28a745; background: #d4edda; }
        .error { border-left-color: #dc3545; background: #f8d7da; }
        .info { border-left-color: #17a2b8; background: #d1ecf1; }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ TTS Voice Bridge ë””ë²„ê·¸ í˜ì´ì§€</h1>
    
    <div class="section">
        <h2>ğŸ“‹ í™•ì¥í”„ë¡œê·¸ë¨ ì„¤ì¹˜ ê°€ì´ë“œ</h2>
        <ol>
            <li>Chrome ë¸Œë¼ìš°ì €ì—ì„œ <code>chrome://extensions/</code> ì ‘ì†</li>
            <li>ìš°ì¸¡ ìƒë‹¨ì˜ "ê°œë°œì ëª¨ë“œ" í† ê¸€ ì¼œê¸°</li>
            <li>"ì••ì¶•í•´ì œëœ í™•ì¥ í”„ë¡œê·¸ë¨ì„ ë¡œë“œí•©ë‹ˆë‹¤" í´ë¦­</li>
            <li><code>/Users/ulift/Documents/speakerforai/dist</code> í´ë” ì„ íƒ</li>
            <li>í™•ì¥í”„ë¡œê·¸ë¨ì´ ì„¤ì¹˜ë˜ë©´ ë¸Œë¼ìš°ì € ìƒë‹¨ì— ì•„ì´ì½˜ í‘œì‹œë¨</li>
        </ol>
    </div>

    <div class="section">
        <h2>ğŸ”§ Web Speech API í…ŒìŠ¤íŠ¸</h2>
        <button class="test-button" onclick="testSpeechAPI()">Web Speech API ì§€ì› í™•ì¸</button>
        <button class="test-button" onclick="testVoices()">ìŒì„± ëª©ë¡ í™•ì¸</button>
        <button class="test-button" onclick="testTTS()">ê°„ë‹¨í•œ TTS í…ŒìŠ¤íŠ¸</button>
        <div id="speechResult" class="result" style="display:none;"></div>
    </div>

    <div class="section">
        <h2>ğŸ¤ TTS í…ŒìŠ¤íŠ¸</h2>
        <textarea id="testText" placeholder="í…ŒìŠ¤íŠ¸í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." rows="3" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">ì•ˆë…•í•˜ì„¸ìš”. TTS Voice Bridge í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.</textarea>
        <br><br>
        <button class="test-button" onclick="playTestTTS()">ìŒì„± ì¬ìƒ</button>
        <button class="test-button" onclick="stopTestTTS()">ìŒì„± ì •ì§€</button>
        <div id="ttsResult" class="result" style="display:none;"></div>
    </div>

    <div class="section">
        <h2>ğŸ“Š ì‹œìŠ¤í…œ ì •ë³´</h2>
        <button class="test-button" onclick="showSystemInfo()">ì‹œìŠ¤í…œ ì •ë³´ í‘œì‹œ</button>
        <div id="systemInfo" class="result" style="display:none;"></div>
    </div>

    <script>
        let currentUtterance = null;

        function showResult(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.className = `result ${type}`;
            element.innerHTML = message;
        }

        function testSpeechAPI() {
            console.log('ğŸ§ª Web Speech API í…ŒìŠ¤íŠ¸ ì‹œì‘');
            
            const isSupported = 'speechSynthesis' in window && 'SpeechSynthesisUtterance' in window;
            const message = isSupported 
                ? 'âœ… Web Speech APIê°€ ì§€ì›ë©ë‹ˆë‹¤!' 
                : 'âŒ Web Speech APIê°€ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
            
            showResult('speechResult', message, isSupported ? 'success' : 'error');
            
            if (isSupported) {
                console.log('âœ… speechSynthesis ê°ì²´:', window.speechSynthesis);
            }
        }

        function testVoices() {
            console.log('ğŸµ ìŒì„± ëª©ë¡ í…ŒìŠ¤íŠ¸ ì‹œì‘');
            
            const voices = speechSynthesis.getVoices();
            console.log('ğŸµ ë¡œë“œëœ ìŒì„±ë“¤:', voices);
            
            if (voices.length === 0) {
                showResult('speechResult', 'â³ ìŒì„± ëª©ë¡ì„ ë¡œë“œí•˜ëŠ” ì¤‘... ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.', 'info');
                
                // voiceschanged ì´ë²¤íŠ¸ ëŒ€ê¸°
                speechSynthesis.addEventListener('voiceschanged', () => {
                    const newVoices = speechSynthesis.getVoices();
                    if (newVoices.length > 0) {
                        const voiceList = newVoices.map(v => `${v.name} (${v.lang})`).join('<br>');
                        showResult('speechResult', `âœ… ${newVoices.length}ê°œì˜ ìŒì„±ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤:<br><br>${voiceList}`, 'success');
                    }
                }, { once: true });
            } else {
                const voiceList = voices.map(v => `${v.name} (${v.lang})`).join('<br>');
                showResult('speechResult', `âœ… ${voices.length}ê°œì˜ ìŒì„±ì´ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤:<br><br>${voiceList}`, 'success');
            }
        }

        function testTTS() {
            console.log('ğŸ”Š TTS í…ŒìŠ¤íŠ¸ ì‹œì‘');
            
            if (!('speechSynthesis' in window)) {
                showResult('speechResult', 'âŒ Web Speech APIê°€ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
                return;
            }

            const utterance = new SpeechSynthesisUtterance('í…ŒìŠ¤íŠ¸ ìŒì„±ì…ë‹ˆë‹¤.');
            
            utterance.onstart = () => {
                console.log('ğŸµ TTS ì‹œì‘ë¨');
                showResult('speechResult', 'ğŸµ TTS ì¬ìƒì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            };
            
            utterance.onend = () => {
                console.log('âœ… TTS ì™„ë£Œë¨');
                showResult('speechResult', 'âœ… TTS ì¬ìƒì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            };
            
            utterance.onerror = (event) => {
                console.error('âŒ TTS ì˜¤ë¥˜:', event.error);
                showResult('speechResult', `âŒ TTS ì˜¤ë¥˜: ${event.error}`, 'error');
            };

            speechSynthesis.speak(utterance);
        }

        function playTestTTS() {
            const text = document.getElementById('testText').value;
            if (!text.trim()) {
                showResult('ttsResult', 'âŒ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            console.log('ğŸµ ì‚¬ìš©ì í…ìŠ¤íŠ¸ TTS ì‹œì‘:', text);

            if (currentUtterance) {
                speechSynthesis.cancel();
            }

            currentUtterance = new SpeechSynthesisUtterance(text);
            
            currentUtterance.onstart = () => {
                console.log('ğŸµ TTS ì‹œì‘ë¨');
                showResult('ttsResult', 'ğŸµ ìŒì„± ì¬ìƒ ì¤‘...', 'info');
            };
            
            currentUtterance.onend = () => {
                console.log('âœ… TTS ì™„ë£Œë¨');
                showResult('ttsResult', 'âœ… ìŒì„± ì¬ìƒì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                currentUtterance = null;
            };
            
            currentUtterance.onerror = (event) => {
                console.error('âŒ TTS ì˜¤ë¥˜:', event.error);
                showResult('ttsResult', `âŒ TTS ì˜¤ë¥˜: ${event.error}`, 'error');
                currentUtterance = null;
            };

            speechSynthesis.speak(currentUtterance);
        }

        function stopTestTTS() {
            console.log('â¹ï¸ TTS ì •ì§€');
            speechSynthesis.cancel();
            showResult('ttsResult', 'â¹ï¸ ìŒì„± ì¬ìƒì´ ì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
            currentUtterance = null;
        }

        function showSystemInfo() {
            console.log('ğŸ“Š ì‹œìŠ¤í…œ ì •ë³´ ìˆ˜ì§‘');
            
            const info = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                languages: navigator.languages,
                cookieEnabled: navigator.cookieEnabled,
                speechSynthesis: 'speechSynthesis' in window,
                webkitSpeechRecognition: 'webkitSpeechRecognition' in window,
                chrome: typeof chrome !== 'undefined',
                chromeRuntime: typeof chrome?.runtime !== 'undefined'
            };

            const infoHTML = Object.entries(info)
                .map(([key, value]) => `<strong>${key}:</strong> ${value}`)
                .join('<br>');

            showResult('systemInfo', infoHTML, 'info');
            console.log('ğŸ“Š ì‹œìŠ¤í…œ ì •ë³´:', info);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ í…ŒìŠ¤íŠ¸
        window.addEventListener('load', () => {
            console.log('ğŸš€ ë””ë²„ê·¸ í˜ì´ì§€ ë¡œë“œë¨');
            testSpeechAPI();
        });
    </script>
</body>
</html>